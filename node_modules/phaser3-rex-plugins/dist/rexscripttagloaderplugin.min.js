var e,t;e=void 0,t=function(){const e=Phaser.Loader.FILE_POPULATED,t=Phaser.Utils.String.UUID;class r extends Phaser.Loader.File{constructor(e,r){r.hasOwnProperty("type")||(r.type="await"),r.hasOwnProperty("url")||(r.url=""),r.hasOwnProperty("key")||(r.key=t()),super(e,r)}load(){if(this.state===e)this.loader.nextFile(this,!0);else{var t=this.config,r=t.callback,n=t.scope;if(r){var i=this,o=!1,s=function(){o||(i.onLoad(),o=!0)},a=function(){o||(i.onError(),o=!0)};n?r.call(n,s,a):r(s,a)}else this.onLoad()}}onLoad(){this.loader.nextFile(this,!0)}onError(){this.loader.nextFile(this,!1)}}var n=function(e){return new Promise((function(t,r){!function(e,t){for(var r=document.getElementsByTagName("script"),n=0,i=r.length;n<i;n++)if(-1!=r[n].src.indexOf(e))return void(t&&t());var o=document.createElement("script");o.setAttribute("src",e),t&&(o.onload=t),document.head.appendChild(o)}(e,t)}))};const i=Phaser.Utils.Objects.IsPlainObject,o=Phaser.Utils.Objects.GetFastValue,s=function(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.addFile(a(this,e[t]));else this.addFile(a(this,e));return this};var a=function(e,t,s){if(i(t)){var a=t;t=o(a,"url"),s=o(a,"availableTest")}return new r(e,{type:"scriptTag",config:{callback:function(e,r){n(t).then((function(){if(!s)return Promise.resolve();var e=function(){return s()?Promise.resolve():(t=10,void 0===t&&(t=0),new Promise((function(e,n){setTimeout((function(){e(r)}),t)}))).then((function(){return e()}));var t,r};return e()})).then((function(){e()}))}}})};class l extends Phaser.Plugins.BasePlugin{constructor(e){super(e),e.registerFileType("rexScriptTag",s)}addToScene(e){e.sys.load.rexScriptTag=s}}return l},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).rexscripttagloaderplugin=t();
